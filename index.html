<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1 user-scalable=no">

    <link rel="shortcut icon" type="image/x-icon" href="core/img/favicon.ico">
    <link rel="icon" type="image/x-icon" href="core/img/favicon.ico">

    <title>
Week 4b: Waveshaping
</title>

    <link rel="stylesheet" href="core/js_lib/katex/katex.min.css" type="text/css"/>
    <link rel="stylesheet" href="core/css/core.css" type="text/css"/>
	
<link rel="stylesheet" href="css/000_proof_of_concept.css" type="text/css"/>

</head>

<body>
	<div id="example">
		
<section id="introduction">
	<h1>Waveshaping</h1>

	<p>
	<i>Waveshaping</i> is an audio processing technique that uses an input signal <span class="latex">x(t)</span> to drive a <i>transfer function</i> <span class="latex">f(x)</span>. The transfer function's domain must cover the range of the input signal, i.e. if <span class="latex">x(t) \in [-1, 1]</span>, then <span class="latex">f(x) : [-1, 1] \rightarrow [a, b]</span>. 
	</p>

	<p>
	This technique is useful for soft clipping: one could employ a transfer function <span class="latex">f(x)</span> such that <span class="latex">\lim_{x \rightarrow -\infty} f(x) = -1</span> and <span class="latex">\lim_{x \rightarrow \infty} f(x) = 1</span>. By using such a function, we can ensure that a driving signal never exceeds the dynamic range of our system. An example function that satisfies these constraints is <span class="latex">arctan</span>.
	</p>

	<p>
	Waveshaping can be parametrized using a <i>waveshaping index</i> <span class="latex">i(t)</span>, either a function or a constant. Given driving signal <span class="latex">x(t)</span>, transfer function <span class="latex">f(x)</span> and waveshaping index <span class="latex">i(t)</span>, waveshaping is defined as <span class="latex">w(t) = f(i(t)x(t))</span>.
	</p>
</section>
<section id="example">
    <p>
        The following is an audio example demonstrating Chebyshev polynomial waveshaping on a sinusoidal input. Chebyshev polynomials can be used to add partials to an input signal. Try changing the transfer function, oscillator frequency, and waveshaping index while looking at the spectrum analyzer to see the behavior.
    </p>
	<div class="audio_example" id="waveshaper">
		<button id="audio_toggle">Start Audio</button>
		<br>
		<label>Volume:</label>
		<input type="range" id="audio_out_gain"></input>
		<br>
		<label>Oscillator frequency:</label><input type="range" id="frequency"></input>
		<br>
		<label>Transfer function:</label><canvas id="shaper" height=64 width=64></canvas>
		<select id="shaper_function"></select>
		<br>
		<label>Waveshaping index:</label><input type="range" id="index"></input>
		<br>
		<label>Spectrum analyzer</label>
		<canvas id="oscilloscope" width="512" height="128"></canvas>
		<br>
	</div>
</section>

	</div>

	<script type="text/javascript" src="core/js_lib/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="core/js_lib/katex/katex.min.js"></script>
	<script type="text/javascript" src="core/js/core.js"></script>
	
<script type="text/javascript" src="core/js/processors/table_oscillator_4.js"></script>
<script type="text/javascript" src="core/js/processors/table_function_4.js"></script>
<script type="text/javascript" src="js/000_proof_of_concept.js"></script>

</body>
</html>
